<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generador de Mensajes</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      padding: 20px;
      background-color: #f4f4f4;
    }
    h1 {
      text-align: center;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .form-group {
      margin-bottom: 15px;
    }
    .form-group label {
      display: block;
      margin-bottom: 5px;
    }
    .form-group select, .form-group input {
      width: 100%;
      padding: 8px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }
    #results {
      margin-top: 20px;
    }
    .message {
      padding: 10px;
      background: #e0e0e0;
      border-radius: 4px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <h1>Generador de Mensajes</h1>
  <div class="container">
    <form id="messageForm">
      <div class="form-group">
        <label for="language">Selecciona el idioma:</label>
        <select id="language" name="language">
          <option value="es">Español</option>
          <option value="en">Inglés</option>
        </select>
      </div>
      <div class="form-group">
        <label for="sign">Ingresa tu signo zodiacal (o déjalo en blanco para aleatorio):</label>
        <input type="text" id="sign" name="sign" placeholder="libra, virgo, tauro, etc.">
      </div>
      <button type="submit">Generar Mensajes</button>
    </form>
    <div id="results"></div>
  </div>

  <script>
    function generateRandomNumber(num) {
      // Gets a random number from 0 to num - 1
      return Math.floor(Math.random() * num);
    }

    const messages = {
      es: {
        signInfo: ['libra', 'virgo', 'tauro', 'cancer', 'aries'],
        fortuneOutput: ['terrible suerte 😔', 'mala suerte 😟', 'suerte 🙂', 'buena suerte 😀', 'muy afortunado 🌟'],
        advice: ['Vete a comer 🍽️', 'no leas esto 🚫', 'Juega más 🎮', 'Solo una vez más 🎲']
      },
      en: {
        signInfo: ['libra', 'virgo', 'taurus', 'cancer', 'aries'],
        fortuneOutput: ['terrible luck 😔', 'bad luck 😟', 'ok luck 🙂', 'good luck 😀', 'very lucky 🌟'],
        advice: ['Go out and eat 🍽️', 'don\'t read this 🚫', 'Play more 🎮', 'Just one more time 🎲']
      }
    };

    const zodiacMessages = {
      es: {
        libra: 'Hoy es un buen día para tomar decisiones equilibradas.',
        virgo: 'Presta atención a los detalles en tu trabajo.',
        tauro: 'Disfruta de las pequeñas cosas de la vida.',
        cancer: 'Dedica tiempo a tu familia y seres queridos.',
        aries: 'Es un gran momento para tomar la iniciativa.'
      },
      en: {
        libra: 'Today is a good day to make balanced decisions.',
        virgo: 'Pay attention to the details in your work.',
        taurus: 'Enjoy the little things in life.',
        cancer: 'Spend time with your family and loved ones.',
        aries: 'It’s a great time to take initiative.'
      }
    };

    const timeOfDayMessages = {
      es: {
        morning: '¡Buenos días! Es un buen momento para empezar el día con energía positiva.',
        afternoon: '¡Buenas tardes! Aprovecha el resto del día para lograr tus objetivos.',
        evening: '¡Buenas noches! Relájate y disfruta de un merecido descanso.'
      },
      en: {
        morning: 'Good morning! It’s a great time to start your day with positive energy.',
        afternoon: 'Good afternoon! Make the most of the rest of your day to achieve your goals.',
        evening: 'Good evening! Relax and enjoy a well-deserved rest.'
      }
    };

    function getCurrentDateTime() {
      const now = new Date();
      return now.toLocaleString();
    }

    function getTimeOfDay() {
      const hour = new Date().getHours();
      if (hour < 12) return 'morning';
      if (hour < 18) return 'afternoon';
      return 'evening';
    }

    function generatePersonalWisdom(language = 'es', userSign = null) {
      let personalWisdom = [];
      const dateTime = getCurrentDateTime();
      const timeOfDay = getTimeOfDay();
      
      if (!messages[language]) {
        console.error('Language not supported.');
        return;
      }

      const collectiveWisdom = messages[language];
      const zodiacMessagesInLang = zodiacMessages[language];
      const timeOfDayMessagesInLang = timeOfDayMessages[language];
      
      const userSignLower = userSign ? userSign.toLowerCase() : '';
      const validSigns = collectiveWisdom.signInfo;
      const isValidSign = validSigns.includes(userSignLower);
      
      for (let prop in collectiveWisdom) {
        let optionIdx;
        let message;
        
        if (prop === 'signInfo') {
          message = `${timeOfDayMessagesInLang[timeOfDay]} `;
        }

        switch (prop) {
          case 'signInfo':
            if (userSignLower && isValidSign) {
              message += `Tu signo del zodiaco es: "${userSignLower}". ${zodiacMessagesInLang[userSignLower] || 'No tengo información específica para tu signo.'}`;
            } else {
              optionIdx = generateRandomNumber(collectiveWisdom[prop].length);
              const sign = collectiveWisdom[prop][optionIdx];
              message += `Tu signo del zodiaco es: "${sign}".`;
              if (zodiacMessagesInLang[sign]) {
                message += ` ${zodiacMessagesInLang[sign]}`;
              }
            }
            break;
          case 'fortuneOutput':
            optionIdx = generateRandomNumber(collectiveWisdom[prop].length);
            message = `Tu tienes: "${collectiveWisdom[prop][optionIdx]}".`;
            break;
          case 'advice':
            optionIdx = generateRandomNumber(collectiveWisdom[prop].length);
            message = `Tu debes: "${collectiveWisdom[prop][optionIdx]}".`;
            break;
          default:
            message = 'No tengo suficiente información.';
        }
        
        personalWisdom.push(`[${dateTime}] ${message}`);
      }
      
      return personalWisdom;
    }

    function formatWisdom(wisdom) {
      return wisdom.map(msg => `<div class="message">${msg}</div>`).join('');
    }

    function saveMessagesToLocalStorage(messages) {
      localStorage.setItem('savedMessages', JSON.stringify(messages));
    }

    function getMessagesFromLocalStorage() {
      const savedMessages = localStorage.getItem('savedMessages');
      return savedMessages ? JSON.parse(savedMessages) : [];
    }

    document.getElementById('messageForm').addEventListener('submit', function(event) {
      event.preventDefault();
      
      const language = document.getElementById('language').value;
      const userSign = document.getElementById('sign').value.trim();
      const wisdom = generatePersonalWisdom(language, userSign);
      
      saveMessagesToLocalStorage(wisdom);
      const savedWisdom = getMessagesFromLocalStorage();
      document.getElementById('results').innerHTML = formatWisdom(savedWisdom);
    });

    // Initialize with saved messages if available
    const initialMessages = getMessagesFromLocalStorage();
    if (initialMessages.length > 0) {
      document.getElementById('results').innerHTML = formatWisdom(initialMessages);
    }
  </script>
</body>
</html>
